#!/usr/bin/env bash

KERNEL_TYPE=${1:-"tcpaad"} # Kernel type: "tcpaad" or "default"
export KERNEL_TYPE
SERVER_IP="192.168.1.165"
SERVER_USER="rakhat"
SERVER_IFACE="wlan0"
export SERVER_IP SERVER_USER SERVER_IFACE
CLIENT_IP="192.168.1.50"
CLIENT_IFACE="enp7s0"
export CLIENT_IP CLIENT_IFACE
ROUTER_IP="192.168.1.1"
ROUTER_USER="root"
ROUTER_SSH_OPTS="-oHostKeyAlgorithms=+ssh-rsa -oPubkeyAcceptedAlgorithms=+ssh-rsa"  # SSH options for older OpenWRT routers
export ROUTER_IP ROUTER_USER ROUTER_SSH_OPTS
IPERF_PORT=5201
IPERF_TEST_DURATION=30
export IPERF_PORT IPERF_TEST_DURATION
BANDWIDTHS=(20 50 100 nolim)
DELAYS=(10 50 100 nodelay)
RATES=(34 35 36 44 45 46 94 95 96 104 105 106)
ITERATIONS=3
export BANDWIDTHS DELAYS RATES ITERATIONS
SETTLE_TIME=5
RATE_SLEEP_TIME=30  # Time to wait after setting WiFi rate for router to transition
export SETTLE_TIME RATE_SLEEP_TIME
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
RESULTS_DIR="${SCRIPT_DIR}/results/${KERNEL_TYPE}"
export SCRIPT_DIR RESULTS_DIR
declare -A RATE_MAP=(
    [34]="HT20-SGI-MCS4"   [35]="HT20-SGI-MCS5"   [36]="HT20-SGI-MCS6"
    [44]="HT20-SGI-MCS12"  [45]="HT20-SGI-MCS13"  [46]="HT20-SGI-MCS14"
    [94]="HT40-SGI-MCS4"   [95]="HT40-SGI-MCS5"   [96]="HT40-SGI-MCS6"
    [104]="HT40-SGI-MCS12" [105]="HT40-SGI-MCS13" [106]="HT40-SGI-MCS14"
)
export RATE_MAP
